{"version":3,"sources":["webpack:///./public/app/core/components/OrgActionBar/OrgActionBar.tsx","webpack:///./public/app/features/plugins/PluginListItem.tsx","webpack:///./public/app/features/plugins/PluginList.tsx","webpack:///./public/app/features/plugins/PluginSignatureBadge.tsx","webpack:///./public/app/features/plugins/PluginListPage.tsx","webpack:///./public/app/features/plugins/state/selectors.ts"],"names":["OrgActionBar","this","props","searchQuery","linkButton","setSearchQuery","target","linkProps","href","className","labelClassName","inputClassName","value","onChange","placeholder","title","PureComponent","PluginListItem","plugin","id","type","PluginSignatureBadge","status","signature","hasUpdate","bs-tooltip","src","info","logos","small","name","author","PluginList","plugins","map","index","key","display","PluginSignatureStatus","invalid","internal","text","icon","color","tooltip","valid","modified","getSignatureDisplayModel","displayName","PluginListPage","fetchPlugins","loadPlugins","hasFetched","navModel","setPluginsSearchQuery","Contents","isLoading","query","mapDispatchToProps","hot","module","connect","state","getNavModel","navIndex","getPlugins","getPluginsSearchQuery","regex","RegExp","filter","item","test","description"],"mappings":"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","file":"PluginListPage.4e20f99bf66682942589.js","sourcesContent":["import React, { PureComponent } from 'react';\nimport { FilterInput } from '../FilterInput/FilterInput';\nimport { LinkButton } from '@grafana/ui';\n\nexport interface Props {\n  searchQuery: string;\n  setSearchQuery: (value: string) => {};\n  linkButton: { href: string; title: string };\n  target?: string;\n}\n\nexport default class OrgActionBar extends PureComponent<Props> {\n  render() {\n    const { searchQuery, linkButton, setSearchQuery, target } = this.props;\n    const linkProps = { href: linkButton.href };\n\n    if (target) {\n      (linkProps as any).target = target;\n    }\n\n    return (\n      <div className=\"page-action-bar\">\n        <div className=\"gf-form gf-form--grow\">\n          <FilterInput\n            labelClassName=\"gf-form--has-input-icon\"\n            inputClassName=\"gf-form-input width-20\"\n            value={searchQuery}\n            onChange={setSearchQuery}\n            placeholder={'Search by name or type'}\n          />\n        </div>\n        <div className=\"page-action-bar__spacer\" />\n        <LinkButton {...linkProps}>{linkButton.title}</LinkButton>\n      </div>\n    );\n  }\n}\n","import React, { FC } from 'react';\nimport { PluginMeta } from '@grafana/data';\nimport { PluginSignatureBadge } from './PluginSignatureBadge';\n\ninterface Props {\n  plugin: PluginMeta;\n}\n\nconst PluginListItem: FC<Props> = props => {\n  const { plugin } = props;\n\n  return (\n    <li className=\"card-item-wrapper\">\n      <a className=\"card-item\" href={`plugins/${plugin.id}/`}>\n        <div className=\"card-item-header\">\n          <div className=\"card-item-type\">{plugin.type}</div>\n          <PluginSignatureBadge status={plugin.signature} />\n          {plugin.hasUpdate && (\n            <div className=\"card-item-notice\">\n              <span bs-tooltip=\"plugin.latestVersion\">Update available!</span>\n            </div>\n          )}\n        </div>\n        <div className=\"card-item-body\">\n          <figure className=\"card-item-figure\">\n            <img src={plugin.info.logos.small} />\n          </figure>\n          <div className=\"card-item-details\">\n            <div className=\"card-item-name\">{plugin.name}</div>\n            <div className=\"card-item-sub-name\">{`By ${plugin.info.author.name}`}</div>\n          </div>\n        </div>\n      </a>\n    </li>\n  );\n};\n\nexport default PluginListItem;\n","import React, { FC } from 'react';\nimport PluginListItem from './PluginListItem';\nimport { PluginMeta } from '@grafana/data';\n\ninterface Props {\n  plugins: PluginMeta[];\n}\n\nconst PluginList: FC<Props> = props => {\n  const { plugins } = props;\n\n  return (\n    <section className=\"card-section card-list-layout-list\">\n      <ol className=\"card-list\">\n        {plugins.map((plugin, index) => {\n          return <PluginListItem plugin={plugin} key={`${plugin.name}-${index}`} />;\n        })}\n      </ol>\n    </section>\n  );\n};\n\nexport default PluginList;\n","import React from 'react';\nimport { Badge, BadgeProps } from '@grafana/ui';\nimport { PluginSignatureStatus } from '@grafana/data';\n\ninterface Props {\n  status?: PluginSignatureStatus;\n}\n\nexport const PluginSignatureBadge: React.FC<Props> = ({ status }) => {\n  const display = getSignatureDisplayModel(status);\n  return <Badge text={display.text} color={display.color} icon={display.icon} tooltip={display.tooltip} />;\n};\n\nfunction getSignatureDisplayModel(signature?: PluginSignatureStatus): BadgeProps {\n  if (!signature) {\n    signature = PluginSignatureStatus.invalid;\n  }\n\n  switch (signature) {\n    case PluginSignatureStatus.internal:\n      return { text: 'Core', icon: 'cube', color: 'blue', tooltip: 'Core plugin that is bundled with Grafana' };\n    case PluginSignatureStatus.valid:\n      return { text: 'Signed', icon: 'lock', color: 'green', tooltip: 'Signed and verified plugin' };\n    case PluginSignatureStatus.invalid:\n      return {\n        text: 'Invalid',\n        icon: 'exclamation-triangle',\n        color: 'red',\n        tooltip: 'Invalid plugin signature',\n      };\n    case PluginSignatureStatus.modified:\n      return {\n        text: 'Modified',\n        icon: 'exclamation-triangle',\n        color: 'red',\n        tooltip: 'Valid signature but content has been modified',\n      };\n  }\n\n  return { text: 'Unsigned', icon: 'exclamation-triangle', color: 'red', tooltip: 'Unsigned external plugin' };\n}\n\nPluginSignatureBadge.displayName = 'PluginSignatureBadge';\n","import React, { PureComponent } from 'react';\nimport { hot } from 'react-hot-loader';\nimport { connect } from 'react-redux';\nimport Page from 'app/core/components/Page/Page';\nimport OrgActionBar from 'app/core/components/OrgActionBar/OrgActionBar';\nimport PluginList from './PluginList';\nimport { loadPlugins } from './state/actions';\nimport { getNavModel } from 'app/core/selectors/navModel';\nimport { getPlugins, getPluginsSearchQuery } from './state/selectors';\nimport { NavModel, PluginMeta } from '@grafana/data';\nimport { StoreState } from 'app/types';\nimport { setPluginsSearchQuery } from './state/reducers';\n\nexport interface Props {\n  navModel: NavModel;\n  plugins: PluginMeta[];\n  searchQuery: string;\n  hasFetched: boolean;\n  loadPlugins: typeof loadPlugins;\n  setPluginsSearchQuery: typeof setPluginsSearchQuery;\n}\n\nexport class PluginListPage extends PureComponent<Props> {\n  componentDidMount() {\n    this.fetchPlugins();\n  }\n\n  async fetchPlugins() {\n    await this.props.loadPlugins();\n  }\n\n  render() {\n    const { hasFetched, navModel, plugins, setPluginsSearchQuery, searchQuery } = this.props;\n\n    const linkButton = {\n      href: 'https://grafana.com/plugins?utm_source=grafana_plugin_list',\n      title: 'Find more plugins on Grafana.com',\n    };\n\n    return (\n      <Page navModel={navModel}>\n        <Page.Contents isLoading={!hasFetched}>\n          <>\n            <OrgActionBar\n              searchQuery={searchQuery}\n              setSearchQuery={query => setPluginsSearchQuery(query)}\n              linkButton={linkButton}\n              target=\"_blank\"\n            />\n            {hasFetched && plugins && plugins && <PluginList plugins={plugins} />}\n          </>\n        </Page.Contents>\n      </Page>\n    );\n  }\n}\n\nfunction mapStateToProps(state: StoreState) {\n  return {\n    navModel: getNavModel(state.navIndex, 'plugins'),\n    plugins: getPlugins(state.plugins),\n    searchQuery: getPluginsSearchQuery(state.plugins),\n    hasFetched: state.plugins.hasFetched,\n  };\n}\n\nconst mapDispatchToProps = {\n  loadPlugins,\n  setPluginsSearchQuery,\n};\n\nexport default hot(module)(connect(mapStateToProps, mapDispatchToProps)(PluginListPage));\n","import { PluginsState } from 'app/types/plugins';\n\nexport const getPlugins = (state: PluginsState) => {\n  const regex = new RegExp(state.searchQuery, 'i');\n\n  return state.plugins.filter(item => {\n    return regex.test(item.name) || regex.test(item.info.author.name) || regex.test(item.info.description);\n  });\n};\n\nexport const getPluginsSearchQuery = (state: PluginsState) => state.searchQuery;\n"],"sourceRoot":""}